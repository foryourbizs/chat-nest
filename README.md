<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
</p>

[circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
[circleci-url]: https://circleci.com/gh/nestjs/nest

  <p align="center">A progressive <a href="http://nodejs.org" target="_blank">Node.js</a> framework for building efficient and scalable server-side applications.</p>
    <p align="center">
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/v/@nestjs/core.svg" alt="NPM Version" /></a>
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
<a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
<a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
<a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
<a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
  <a href="https://paypal.me/kamilmysliwiec" target="_blank"><img src="https://img.shields.io/badge/Donate-PayPal-ff3f59.svg" alt="Donate us"/></a>
    <a href="https://opencollective.com/nest#sponsor"  target="_blank"><img src="https://img.shields.io/badge/Support%20us-Open%20Collective-41B883.svg" alt="Support us"></a>
  <a href="https://twitter.com/nestframework" target="_blank"><img src="https://img.shields.io/twitter/follow/nestframework.svg?style=social&label=Follow" alt="Follow us on Twitter"></a>
</p>
  <!--[![Backers on Open Collective](https://opencollective.com/nest/backers/badge.svg)](https://opencollective.com/nest#backer)
  [![Sponsors on Open Collective](https://opencollective.com/nest/sponsors/badge.svg)](https://opencollective.com/nest#sponsor)-->

# NestJS Template

ì´ í”„ë¡œì íŠ¸ëŠ” [NestJS](https://nestjs.com/)ì™€ [@foryourdev/nestjs-crud](https://github.com/foryourdev/nestjs-crud)ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì¶•ëœ **AI ì±—ë´‡ í”Œë«í¼** RESTful API í…œí”Œë¦¿ì…ë‹ˆë‹¤.

## íŠ¹ì§•

- ğŸ¤– **2025ë…„ ìµœì‹  OpenAI ëª¨ë¸**: GPT-5, GPT-4.1, GPT-4oë¥¼ ì§€ì›í•˜ëŠ” ì°¨ì„¸ëŒ€ AI ì±—ë´‡ í”Œë«í¼
- ğŸ‘¤ **ìºë¦­í„° ì‹œìŠ¤í…œ**: ê°œì„±ìˆëŠ” ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ í†µí•œ ìºë¦­í„°ë³„ AI í˜ë¥´ì†Œë‚˜ êµ¬í˜„
- ğŸ’¬ **ì´ˆëŒ€ìš©ëŸ‰ ì»¨í…ìŠ¤íŠ¸**: ìµœëŒ€ 100ê°œ ë©”ì‹œì§€ ë§¥ë½ì„ ìœ ì§€í•˜ë©° ìì—°ìŠ¤ëŸ¬ìš´ ì´ˆì¥ë¬¸ ëŒ€í™” ê²½í—˜
- ğŸ“Š **ì°¨ì„¸ëŒ€ AI ê´€ë¦¬**: ìµœì‹  ëª¨ë¸ ê¸°ë°˜ ê³ í’ˆì§ˆ ëŒ€í™” ìš”ì•½, ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§, ë™ì  ëª¨ë¸ ì„ íƒ
- ğŸ”Œ **ì™„ì „í•œ CRUD ì§€ì›**: @foryourdev/nestjs-crudë¥¼ ìµœëŒ€í•œ í™œìš©í•œ ìë™ ì—”ë“œí¬ì¸íŠ¸ ìƒì„±
- ğŸ¯ **ê³ ê¸‰ ì¿¼ë¦¬**: í•„í„°ë§, í˜ì´ì§€ë„¤ì´ì…˜, ì •ë ¬, ê´€ê³„ ì¡°ì¸ì„ í†µí•œ ê°•ë ¥í•œ ë°ì´í„° ì¡°íšŒ
- ğŸ§ª **í…ŒìŠ¤íŠ¸ ì¹œí™”ì **: ì¸ì¦ ì—†ì´ ëª¨ë“  API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ (ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©)
- ğŸ—„ï¸ **TypeORM í†µí•©**: PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì™€ TypeORMì„ ì‚¬ìš©í•œ ORM ì§€ì›
- ğŸ” **ì¿¼ë¦¬ íŒŒì‹±**: í•„í„°ë§, í˜ì´ì§€ë„¤ì´ì…˜, ì •ë ¬, ê´€ê³„ ì¡°ì¸ ë“± í’ë¶€í•œ ì¿¼ë¦¬ ê¸°ëŠ¥
- âœ… **ê²€ì¦**: class-validatorë¥¼ ì‚¬ìš©í•œ DTO ë° ì—”í‹°í‹° ê²€ì¦
- ğŸ” **JWT ì¸ì¦**: JWT ê¸°ë°˜ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë° Refresh Token ì§€ì›
- ğŸ“± **ì†Œì…œ ë¡œê·¸ì¸**: Google, Apple, Kakao, Naver ì†Œì…œ ë¡œê·¸ì¸ ì§€ì›
- ğŸš€ **Railway PostgreSQL**: Railway í˜¸ìŠ¤íŒ… PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

## í™˜ê²½ë³€ìˆ˜ ì„¤ì •

### í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜

í”„ë¡œì íŠ¸ ì‹¤í–‰ì„ ìœ„í•´ ë‹¤ìŒ í™˜ê²½ë³€ìˆ˜ë“¤ì´ í•„ìš”í•©ë‹ˆë‹¤:

```bash
# ì„œë²„ ì„¤ì •
PORT=3000
NODE_ENV=development

# API ì„¤ì •
API_VERSION=1
API_PREFIX=api/v

# JWT ì„¤ì • (í•„ìˆ˜)
JWT_SECRET=your-jwt-secret-key-change-this-in-production
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (í•„ìˆ˜)
DATABASE_TYPE=postgres
DATABASE_HOST=your-database-host
DATABASE_PORT=5432
DATABASE_USERNAME=your-username
DATABASE_PASSWORD=your-secure-password
DATABASE_NAME=your-database-name
DATABASE_SYNCHRONIZE=false
DATABASE_LOGGING=false

# SSL ì„¤ì •
DATABASE_SSL=true
DATABASE_SSL_REJECT_UNAUTHORIZED=false

# Frontend URL
FRONTEND_URL=http://localhost:3000

# OpenAI API ì„¤ì • (AI ì±—ë´‡ ê¸°ëŠ¥ìš©)
OPEN_API_KEY=sk-your-openai-api-key-here
# OPEN_API_SECRET_KEYëŠ” í˜„ì¬ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ (í–¥í›„ í™•ì¥ìš©)

# OpenAI ëª¨ë¸ ì„ íƒ (ì„ íƒì )
# OPENAI_MODEL=gpt-5           # 2025ë…„ 8ì›” ìµœì‹  (ì‹¤í—˜ì )
# OPENAI_MODEL=gpt-4.1         # 2025ë…„ 4ì›” ì¶œì‹œ
# OPENAI_MODEL=gpt-4o          # 2024ë…„ 5ì›” ì¶œì‹œ (ê¸°ë³¸ê°’, ì•ˆì •ì )
# OPENAI_MODEL=gpt-4-turbo     # ë ˆê±°ì‹œ ëª¨ë¸
```

### ì†Œì…œ ë¡œê·¸ì¸ ì„ íƒì  ì„¤ì •

ì†Œì…œ ë¡œê·¸ì¸ì€ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•„ìš”í•œ í”Œë«í¼ì˜ í™˜ê²½ë³€ìˆ˜ë§Œ ì„¤ì •í•˜ë©´ í•´ë‹¹ ì†Œì…œ ë¡œê·¸ì¸ì´ í™œì„±í™”ë©ë‹ˆë‹¤:

```bash
# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# Kakao OAuth
KAKAO_CLIENT_ID=your-kakao-client-id
KAKAO_CLIENT_SECRET=your-kakao-client-secret
KAKAO_CALLBACK_URL=http://localhost:3000/auth/kakao/callback

# Naver OAuth
NAVER_CLIENT_ID=your-naver-client-id
NAVER_CLIENT_SECRET=your-naver-client-secret
NAVER_CALLBACK_URL=http://localhost:3000/auth/naver/callback

# Apple OAuth
APPLE_CLIENT_ID=your-apple-service-id
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY=your-apple-private-key
APPLE_CALLBACK_URL=http://localhost:3000/auth/apple/callback
```

### ğŸ¤– OpenAI API í‚¤ íšë“ ë°©ë²•

AI ì±—ë´‡ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ OpenAI API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤:

1. [OpenAI í”Œë«í¼](https://platform.openai.com/)ì— ê°€ì…/ë¡œê·¸ì¸
2. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ "API keys" í´ë¦­
3. "Create new secret key" ë²„íŠ¼ í´ë¦­
4. í‚¤ ì´ë¦„ì„ ì…ë ¥í•˜ê³  ìƒì„±
5. ìƒì„±ëœ í‚¤ë¥¼ ì•ˆì „í•œ ê³³ì— ë³µì‚¬ (í•œ ë²ˆë§Œ í‘œì‹œë¨)
6. `.env` íŒŒì¼ì˜ `OPEN_API_KEY`ì— ì„¤ì •

**âš ï¸ ì£¼ì˜ì‚¬í•­:**

- API í‚¤ëŠ” ì ˆëŒ€ ê³µê°œí•˜ì§€ ë§ˆì„¸ìš”
- GitHub ë“±ì— ì—…ë¡œë“œí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜
- ì‚¬ìš©ëŸ‰ì— ë”°ë¼ ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- OpenAI ê³„ì •ì— ê²°ì œ ì •ë³´ë¥¼ ë“±ë¡í•´ì•¼ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

**ğŸ’° ë¹„ìš© ì•ˆë‚´ (2025ë…„ 8ì›” ê¸°ì¤€):**

- **GPT-5** (ìµœì‹ ): $0.02/1K tokens (ì…ë ¥), $0.06/1K tokens (ì¶œë ¥) _ì‹¤í—˜ì _
- **GPT-4.1**: $0.015/1K tokens (ì…ë ¥), $0.045/1K tokens (ì¶œë ¥)
- **GPT-4o** (ê¸°ë³¸): $0.005/1K tokens (ì…ë ¥), $0.015/1K tokens (ì¶œë ¥) _ë©€í‹°ëª¨ë‹¬_
- GPT-4-turbo: $0.01/1K tokens (ì…ë ¥), $0.03/1K tokens (ì¶œë ¥) _ë ˆê±°ì‹œ_
- GPT-3.5-turbo: $0.001/1K tokens (ì…ë ¥), $0.002/1K tokens (ì¶œë ¥) _ê²½ì œì _

**ğŸš€ 2025ë…„ ìµœì‹  AI ê¸°ìˆ ì„ í™œìš©í•œ ìµœê³  í’ˆì§ˆ:**

- **ê¸°ë³¸ ëª¨ë¸**: GPT-4o (ì•ˆì •ì ì´ê³  ë¹„ìš© íš¨ìœ¨ì ì¸ ë©€í‹°ëª¨ë‹¬ ëª¨ë¸)
- **ì‹¤í—˜ì  ì§€ì›**: GPT-5 (2025ë…„ 8ì›” ì¶œì‹œ, ìµœê³  ì„±ëŠ¥)
- **128K ì»¨í…ìŠ¤íŠ¸**: ìµœëŒ€ 100ê°œ ë©”ì‹œì§€ê¹Œì§€ ê¸°ì–µí•˜ì—¬ ì´ˆì¥ë¬¸ ëŒ€í™” ë§¥ë½ ìœ ì§€
- **ë™ì  ëª¨ë¸ ì„ íƒ**: í™˜ê²½ë³€ìˆ˜ë¡œ ì›í•˜ëŠ” ëª¨ë¸ ì„ íƒ ê°€ëŠ¥
- **ìŠ¤ë§ˆíŠ¸ ìµœì í™”**: í† í° íš¨ìœ¨ì  ê´€ë¦¬ë¡œ ë¹„ìš© ì ˆì•½

## ì‹œì‘í•˜ê¸°

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
npm install
```

### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  ìœ„ì˜ í™˜ê²½ë³€ìˆ˜ë“¤ì„ ì„¤ì •í•˜ì„¸ìš”.

### 3. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
npm run migration:generate -- InitialMigration

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
npm run migration:run
```

### 4. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
npm run start:dev
```

### 5. ë¹Œë“œ

```bash
npm run build
```

### 6. í”„ë¡œë•ì…˜ ì‹¤í–‰

```bash
npm run start:prod
```

## API ì—”ë“œí¬ì¸íŠ¸

### ì¸ì¦ API

#### ì¼ë°˜ ë¡œê·¸ì¸/íšŒì›ê°€ì…

- `POST /api/v1/auth/sign/up` - íšŒì›ê°€ì…
- `POST /api/v1/auth/sign/in` - ë¡œê·¸ì¸
- `POST /api/v1/auth/sign/refresh` - Access Token ê°±ì‹ 
- `POST /api/v1/auth/sign/out` - ë¡œê·¸ì•„ì›ƒ

#### ì†Œì…œ ë¡œê·¸ì¸

- `GET /api/v1/auth/google` - Google ë¡œê·¸ì¸ ì‹œì‘
- `GET /api/v1/auth/google/callback` - Google ë¡œê·¸ì¸ ì½œë°±
- `GET /api/v1/auth/kakao` - Kakao ë¡œê·¸ì¸ ì‹œì‘
- `GET /api/v1/auth/kakao/callback` - Kakao ë¡œê·¸ì¸ ì½œë°±
- `GET /api/v1/auth/naver` - Naver ë¡œê·¸ì¸ ì‹œì‘
- `GET /api/v1/auth/naver/callback` - Naver ë¡œê·¸ì¸ ì½œë°±
- `GET /api/v1/auth/apple` - Apple ë¡œê·¸ì¸ ì‹œì‘
- `GET /api/v1/auth/apple/callback` - Apple ë¡œê·¸ì¸ ì½œë°±

### ì‚¬ìš©ì API

ê¸°ë³¸ CRUD ì—”ë“œí¬ì¸íŠ¸ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤:

- `GET /api/v1/users` - ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜, í•„í„°ë§ ì§€ì›)
- `GET /api/v1/users/:id` - íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ
- `GET /api/v1/users/me` - í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (ì¸ì¦ í•„ìš”)
- `POST /api/v1/users` - ì‚¬ìš©ì ìƒì„±
- `PUT /api/v1/users/:id` - ì‚¬ìš©ì ì—…ë°ì´íŠ¸
- `DELETE /api/v1/users/:id` - ì‚¬ìš©ì ì‚­ì œ

### AI ì±—ë´‡ API

#### ìºë¦­í„° ê´€ë¦¬ (ì™„ì „í•œ CRUD ì§€ì›)

- `GET /api/v1/characters` - ì „ì²´ ìºë¦­í„° ëª©ë¡ ì¡°íšŒ (í•„í„°ë§, í˜ì´ì§€ë„¤ì´ì…˜, ì •ë ¬ ì§€ì›)
  - í•„í„° ì˜ˆì‹œ: `?filter=name||$cont||ì¹œêµ¬&filter=isActive||$eq||true&filter=userId||$eq||1`
  - ì •ë ¬ ì˜ˆì‹œ: `?sort=usageCount,DESC&sort=createdAt,DESC`
  - ê´€ê³„ í¬í•¨: `?include=user,conversations`

- `GET /api/v1/characters/popular` - ì¸ê¸° ìºë¦­í„° ëª©ë¡ ì¡°íšŒ (ì‚¬ìš©ëŸ‰ ê¸°ì¤€ ì •ë ¬)
- `GET /api/v1/characters/:id` - íŠ¹ì • ìºë¦­í„° ì¡°íšŒ
- `POST /api/v1/characters` - ìºë¦­í„° ìƒì„± (**ì¸ì¦ ë¶ˆí•„ìš”, í…ŒìŠ¤íŠ¸ìš©**)
- `PUT/PATCH /api/v1/characters/:id` - ìºë¦­í„° ìˆ˜ì • (**ì¸ì¦ ë¶ˆí•„ìš”, í…ŒìŠ¤íŠ¸ìš©**)
- `DELETE /api/v1/characters/:id` - ìºë¦­í„° ì‚­ì œ (**ì¸ì¦ ë¶ˆí•„ìš”, í…ŒìŠ¤íŠ¸ìš©**)

#### ëŒ€í™” ê´€ë¦¬ (ì™„ì „í•œ CRUD ì§€ì›)

- `GET /api/v1/conversations` - ì „ì²´ ëŒ€í™” ëª©ë¡ ì¡°íšŒ (í•„í„°ë§, í˜ì´ì§€ë„¤ì´ì…˜, ì •ë ¬ ì§€ì›)
  - í•„í„° ì˜ˆì‹œ: `?filter=userId||$eq||1&filter=characterId||$eq||123&filter=isActive||$eq||true`
  - ì •ë ¬ ì˜ˆì‹œ: `?sort=updatedAt,DESC&sort=messageCount,DESC`
  - ê´€ê³„ í¬í•¨: `?include=user,character,messages`

- `GET /api/v1/conversations/:id` - ëŒ€í™” ìƒì„¸ ì¡°íšŒ (ë©”ì‹œì§€ í¬í•¨ ê°€ëŠ¥: `?include=messages`)
- `POST /api/v1/conversations` - ìƒˆ ëŒ€í™” ìƒì„± (**ì¸ì¦ ë¶ˆí•„ìš”, í…ŒìŠ¤íŠ¸ìš©**)
- `PUT/PATCH /api/v1/conversations/:id` - ëŒ€í™” ìˆ˜ì • (**ì¸ì¦ ë¶ˆí•„ìš”, í…ŒìŠ¤íŠ¸ìš©**)
- `DELETE /api/v1/conversations/:id` - ëŒ€í™” ì‚­ì œ (ì†Œí”„íŠ¸ ì‚­ì œ, **ì¸ì¦ ë¶ˆí•„ìš”, í…ŒìŠ¤íŠ¸ìš©**)

#### ë©”ì‹œì§€ ê´€ë¦¬ (CRUD ì§€ì›)

- `GET /api/v1/messages` - ì „ì²´ ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ (í•„í„°ë§, í˜ì´ì§€ë„¤ì´ì…˜, ì •ë ¬ ì§€ì›)
  - í•„í„° ì˜ˆì‹œ: `?filter=conversationId||$eq||123&filter=role||$eq||user`
  - ì •ë ¬ ì˜ˆì‹œ: `?sort=createdAt,ASC`
  - ê´€ê³„ í¬í•¨: `?include=conversation`
- `GET /api/v1/messages/conversation/:conversationId` - íŠ¹ì • ëŒ€í™”ì˜ ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ (**ì†Œìœ ê¶Œ í™•ì¸ ì—†ìŒ, í…ŒìŠ¤íŠ¸ìš©**)
- `GET /api/v1/messages/:id` - íŠ¹ì • ë©”ì‹œì§€ ì¡°íšŒ

#### AI ì±—ë´‡ ê¸°ëŠ¥ (OpenAI GPT ê¸°ë°˜)

**ğŸ¤– 2025ë…„ ìµœì‹  AI**: OpenAI **GPT-4o** (ê¸°ë³¸) ë˜ëŠ” **GPT-5** (ì‹¤í—˜ì )ë¥¼ ì‚¬ìš©í•˜ì—¬ ì°¨ì„¸ëŒ€ AI ì‘ë‹µì„ ìƒì„±í•©ë‹ˆë‹¤.

- `POST /api/v1/chatbot/send-message` - ë©”ì‹œì§€ ì „ì†¡ ë° **ì‹¤ì œ AI ì‘ë‹µ** ë°›ê¸°
  ```json
  {
    "content": "ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ê¸°ë¶„ì´ ì–´ë•Œìš”?",
    "conversationId": 1
  }
  ```
- `GET /api/v1/chatbot/conversations/:conversationId/summary` - **AI ê¸°ë°˜ ëŒ€í™” ìš”ì•½** ìƒì„±
- `GET /api/v1/chatbot/stats` - ì „ì²´ ì‹œìŠ¤í…œ í†µê³„ ë° í† í° ì‚¬ìš©ëŸ‰ ì •ë³´

**ğŸ“Š ê´€ë¦¬ì ì „ìš© API**:

- `GET /api/v1/admin/chatbot/system-stats` - ì‹œìŠ¤í…œ ì „ì²´ AI ì‚¬ìš© í†µê³„
- `GET /api/v1/admin/chatbot/ai-performance` - AI ëª¨ë¸ ì„±ëŠ¥ ë° í† í° ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
- `GET /api/v1/admin/chatbot/token-usage` - OpenAI í† í° ì‚¬ìš©ëŸ‰ ë° ë¹„ìš© ì¶”ì •
- `POST /api/v1/admin/chatbot/send-message` - ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ë©”ì‹œì§€ ì „ì†¡

**âš¡ 2025ë…„ ì°¨ì„¸ëŒ€ AI ê¸°ëŠ¥**:

- **ì´ˆëŒ€ìš©ëŸ‰ ì»¨í…ìŠ¤íŠ¸**: ìµœëŒ€ 100ê°œ ë©”ì‹œì§€ (200K í† í°) ê¹Œì§€ ê¸°ì–µ ê°€ëŠ¥
- **ë™ì  ëª¨ë¸ ì„ íƒ**: í™˜ê²½ë³€ìˆ˜ë¡œ GPT-5, GPT-4.1, GPT-4o ì¤‘ ì„ íƒ
- **ìŠ¤ë§ˆíŠ¸ ì»¨í…ìŠ¤íŠ¸ ìµœì í™”**: AIê°€ ìµœì ì˜ ë©”ì‹œì§€ ì„ íƒìœ¼ë¡œ í† í° íš¨ìœ¨ ê·¹ëŒ€í™”
- **ë©€í‹°ëª¨ë‹¬ ì§€ì›**: GPT-4oì˜ í…ìŠ¤íŠ¸+ì´ë¯¸ì§€ ì²˜ë¦¬ ëŠ¥ë ¥ (í–¥í›„ í™•ì¥)
- **ì „ë¬¸ê°€ê¸‰ AI ìš”ì•½**: ìµœëŒ€ 100ê°œ ë©”ì‹œì§€ë¥¼ ë¶„ì„í•œ ê³ í’ˆì§ˆ ëŒ€í™” ìš”ì•½
- **ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: í† í° ì‚¬ìš©ëŸ‰, ì‘ë‹µ ì‹œê°„, ëª¨ë¸ ì„±ëŠ¥ ì¶”ì 
- **ê³ ê¸‰ ì—ëŸ¬ í•¸ë“¤ë§**: API í•œë„, Rate limit, ëª¨ë¸ í˜¸í™˜ì„± ìë™ ì²˜ë¦¬

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ common/               # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ constants/        # ìƒìˆ˜
â”‚   â”œâ”€â”€ decorators/       # ë°ì½”ë ˆì´í„°
â”‚   â””â”€â”€ interceptors/     # ì¸í„°ì…‰í„°
â”œâ”€â”€ config/               # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”œâ”€â”€ jwt.config.ts
â”‚   â””â”€â”€ openai.config.ts
â”œâ”€â”€ guards/               # ê°€ë“œ
â”‚   â”œâ”€â”€ admin.guard.ts
â”‚   â”œâ”€â”€ auth.guard.ts
â”‚   â””â”€â”€ dev-only.guard.ts
â”œâ”€â”€ migrations/           # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
â”œâ”€â”€ modules/              # ëª¨ë“ˆ
â”‚   â”œâ”€â”€ app.module.ts     # ë£¨íŠ¸ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ auth/             # ì¸ì¦ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ chatbot/          # AI ì±—ë´‡ ëª¨ë“ˆ (ì™„ì „í•œ CRUD ì§€ì›)
â”‚   â”‚   â”œâ”€â”€ entities/     # ì—”í‹°í‹° (Character, Conversation, Message)
â”‚   â”‚   â”œâ”€â”€ services/     # ì„œë¹„ìŠ¤ (Character, Conversation, Message, Chatbot)
â”‚   â”‚   â”œâ”€â”€ controllers/  # ì»¨íŠ¸ë¡¤ëŸ¬ (Character, Conversation, Message, Chatbot)
â”‚   â”‚   â”œâ”€â”€ dto/          # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”œâ”€â”€ interceptors/ # ì¸í„°ì…‰í„° (ì‚¬ìš©ì ID ìë™ ì„¤ì •)
â”‚   â”‚   â”œâ”€â”€ *.module.ts   # ì„œë¸Œ ëª¨ë“ˆë“¤
â”‚   â”‚   â””â”€â”€ index.ts      # í†µí•© ë‚´ë³´ë‚´ê¸°
â”‚   â”œâ”€â”€ schema/           # ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ (ê°œë°œìš©)
â”‚   â””â”€â”€ users/            # ì‚¬ìš©ì ëª¨ë“ˆ
â””â”€â”€ main.ts               # ì§„ì…ì 
```

## ë§ˆì´ê·¸ë ˆì´ì…˜

ì´ í…œí”Œë¦¿ì€ TypeORM ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```bash
# ìƒˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
npm run migration:generate -- MigrationName

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
npm run migration:run

# ë§ˆì´ê·¸ë ˆì´ì…˜ ë˜ëŒë¦¬ê¸°
npm run migration:revert
```

## ê°œë°œ ë„êµ¬

### ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ (ê°œë°œ í™˜ê²½ì—ì„œë§Œ)

ê°œë°œ í™˜ê²½ì—ì„œëŠ” ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆì´ ìë™ìœ¼ë¡œ í™œì„±í™”ë˜ì–´ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ì™€ CRUD ë©”íƒ€ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- `GET /schema` - ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì¡°íšŒ
- CRUD ì—”ë“œí¬ì¸íŠ¸ì˜ ë©”íƒ€ë°ì´í„° ë° ê²€ì¦ ê·œì¹™ í™•ì¸

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- í”„ë¡œë•ì…˜ì—ì„œëŠ” `DATABASE_SYNCHRONIZE=false`ë¡œ ì„¤ì •
- JWT_SECRETì€ ë°˜ë“œì‹œ ê°•ë ¥í•œ í‚¤ë¡œ ë³€ê²½
- í™˜ê²½ë³€ìˆ˜ íŒŒì¼(.env)ì„ gitì— ì»¤ë°‹í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜
- CORS ì„¤ì • í™•ì¸
- ì†Œì…œ ë¡œê·¸ì¸ ì½œë°± URLì˜ HTTPS ì‚¬ìš© ê¶Œì¥

## ì°¸ê³  ìë£Œ

- [NestJS Documentation](https://docs.nestjs.com/)
- [@foryourdev/nestjs-crud Documentation](https://github.com/foryourdev/nestjs-crud)
- [TypeORM Documentation](https://typeorm.io/)
- [Railway PostgreSQL Documentation](https://docs.railway.app/databases/postgresql)

## ğŸ’¡ CRUD ì¤‘ì‹¬ API ì‚¬ìš© ê°€ì´ë“œ (í…ŒìŠ¤íŠ¸ìš© - ì¸ì¦ ë¶ˆí•„ìš”)

ì´ í”„ë¡œì íŠ¸ëŠ” **ì™„ì „í•œ CRUD ìë™í™”**ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤. **í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ ì¸ì¦ì´ ì œê±°ë˜ì–´** ëª¨ë“  APIë¥¼ ììœ ë¡­ê²Œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

### ğŸ“ ê¸°ë³¸ ì‚¬ìš©ë²• (ì¸ì¦ ì—†ìŒ)

```bash
# ğŸ§ª í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ Authorization í—¤ë” ë¶ˆí•„ìš”!

# ğŸ“‹ ì „ì²´ ìºë¦­í„° ëª©ë¡
GET /api/v1/characters

# ğŸ¯ íŠ¹ì • ì‚¬ìš©ìì˜ ìºë¦­í„°ë§Œ í•„í„°ë§
GET /api/v1/characters?filter=userId||$eq||1&filter=name||$cont||ì¹œêµ¬

# ğŸ“Š ê´€ê³„ ë°ì´í„° í¬í•¨
GET /api/v1/conversations?include=character,messages&sort=updatedAt,DESC

# âœ¨ ìƒˆ ë¦¬ì†ŒìŠ¤ ìƒì„± (userIdë¥¼ ì§ì ‘ ì§€ì •)
POST /api/v1/characters
Content-Type: application/json
{
  "name": "ì¹œêµ¬ AI",
  "description": "ì¹œê·¼í•œ ëŒ€í™” ìƒëŒ€",
  "systemPrompt": "ë„ˆëŠ” ì¹œê·¼í•œ ì¹œêµ¬ì²˜ëŸ¼ ëŒ€í™”í•˜ëŠ” AIì•¼",
  "userId": 1
}

# ğŸ”„ ë¦¬ì†ŒìŠ¤ ìˆ˜ì • (ì†Œìœ ê¶Œ í™•ì¸ ì—†ìŒ)
PATCH /api/v1/characters/123
{
  "name": "ì—…ë°ì´íŠ¸ëœ AI"
}

# ğŸ—‘ï¸ ë¦¬ì†ŒìŠ¤ ì‚­ì œ (ì†Œìœ ê¶Œ í™•ì¸ ì—†ìŒ)
DELETE /api/v1/characters/123
```

### ğŸ¨ ê³ ê¸‰ ì¿¼ë¦¬ íŒ¨í„´

```bash
# ğŸ“Š ë³µí•© í•„í„°ë§
GET /api/v1/conversations?filter=characterId||$eq||123&filter=isActive||$eq||true&filter=messageCount||$gt||5

# ğŸ” í…ìŠ¤íŠ¸ ê²€ìƒ‰
GET /api/v1/characters?filter=name||$cont||AI&filter=description||$cont||ì¹œêµ¬

# ğŸ“ˆ ì •ë ¬ ì¡°í•©
GET /api/v1/conversations?sort=messageCount,DESC&sort=updatedAt,DESC

# ğŸ“„ í˜ì´ì§€ë„¤ì´ì…˜
GET /api/v1/characters?limit=10&offset=20

# ğŸ”— ê´€ê³„ ë°ì´í„°ì™€ í•¨ê»˜
GET /api/v1/conversations/123?include=character,messages

# ğŸ‘¤ íŠ¹ì • ì‚¬ìš©ì ë°ì´í„° í•„í„°ë§
GET /api/v1/conversations?filter=userId||$eq||1&include=character
```

### ğŸš€ ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

```bash
# ì‹œë‚˜ë¦¬ì˜¤ 1: ìƒˆ AI ìºë¦­í„° ë§Œë“¤ê³  ëŒ€í™” ì‹œì‘ (í…ŒìŠ¤íŠ¸ìš©)
# 1. ìºë¦­í„° ìƒì„±
POST /api/v1/characters { "name": "í•™ìŠµ ë„ìš°ë¯¸", "systemPrompt": "...", "userId": 1 }

# 2. ëŒ€í™” ìƒì„±
POST /api/v1/conversations { "characterId": 456, "title": "ìˆ˜í•™ ê³µë¶€", "userId": 1 }

# 3. ë©”ì‹œì§€ ì „ì†¡ ë° AI ì‘ë‹µ (ê³ ì • ì‚¬ìš©ì ID ì‚¬ìš©)
POST /api/v1/chatbot/send-message { "conversationId": 789, "content": "ì•ˆë…•!" }

# ì‹œë‚˜ë¦¬ì˜¤ 2: ê¸°ì¡´ ëŒ€í™” ì´ì–´ê°€ê¸° (í…ŒìŠ¤íŠ¸ìš©)
# 1. íŠ¹ì • ì‚¬ìš©ìì˜ ëŒ€í™” ëª©ë¡ í™•ì¸
GET /api/v1/conversations?filter=userId||$eq||1&sort=updatedAt,DESC&limit=5

# 2. íŠ¹ì • ëŒ€í™” ë©”ì‹œì§€ë“¤ í™•ì¸ (ì†Œìœ ê¶Œ í™•ì¸ ì—†ìŒ)
GET /api/v1/messages?filter=conversationId||$eq||789&sort=createdAt,ASC

# 3. ë©”ì‹œì§€ ì „ì†¡ (ê³ ì • ì‚¬ìš©ì ID ì‚¬ìš©)
POST /api/v1/chatbot/send-message { "conversationId": 789, "content": "ê³„ì† ì´ì•¼ê¸°í•´ì¤˜" }
```

### âš¡ í•µì‹¬ ê¸°ëŠ¥ (í…ŒìŠ¤íŠ¸ìš©)

- **ğŸ§ª ì¸ì¦ ë¶ˆí•„ìš”**: ëª¨ë“  APIë¥¼ ì¸ì¦ ì—†ì´ ììœ ë¡­ê²Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- **ğŸ¯ í‘œì¤€ REST**: ì¼ê´€ëœ API íŒ¨í„´ìœ¼ë¡œ í•™ìŠµ ë¹„ìš© ìµœì†Œí™”
- **ğŸ“Š ê°•ë ¥í•œ ì¿¼ë¦¬**: í•„í„°ë§, ì •ë ¬, ê´€ê³„ ì¡°íšŒë¥¼ ì¡°í•©í•œ ë³µì¡í•œ ì¿¼ë¦¬ ì§€ì›
- **ğŸ” ìœ ì—°í•œ í•„í„°ë§**: userId ë“±ì„ í†µí•´ ì›í•˜ëŠ” ë°ì´í„°ë§Œ ì¡°íšŒ ê°€ëŠ¥
- **âš¡ ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘**: ê¶Œí•œ ì²´í¬ ì—†ì´ ë¹ ë¥´ê²Œ API ë™ì‘ í™•ì¸
